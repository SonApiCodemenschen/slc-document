"use strict";(self.webpackChunkdocument=self.webpackChunkdocument||[]).push([[643],{6729:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>o});var s=l(5893),r=l(1151);const t={sidebar_position:3},i="Team Overview API",c={id:"report/team_overview",title:"Team Overview API",description:"GET /widgets/team-overview",source:"@site/docs/report/team_overview.md",sourceDirName:"report",slug:"/report/team_overview",permalink:"/slc-document/docs/report/team_overview",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/report/team_overview.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Alert API",permalink:"/slc-document/docs/report/alert"}},d={},o=[{value:"T\xe0i kho\u1ea3n: TSVHartberg",id:"t\xe0i-kho\u1ea3n-tsvhartberg",level:6},{value:"T\u1ed5ng s\u1ed1 truy v\u1ea5n t\u1ea1m t\xednh: 703",id:"t\u1ed5ng-s\u1ed1-truy-v\u1ea5n-t\u1ea1m-t\xednh-703",level:6},{value:"1. Controller/action - model",id:"1-controlleraction---model",level:3},{value:"WidgetController.php(59): calculateWellnessScoreOfPlayer(108812, &#39;2024-01-15&#39;, 116)",id:"widgetcontrollerphp59-calculatewellnessscoreofplayer108812-2024-01-15-116",level:5},{value:"WidgetController.php(57): get_presence_of_player(&#39;2024-01-15&#39;, 107728)",id:"widgetcontrollerphp57-get_presence_of_player2024-01-15-107728",level:5},{value:"app/Http/Middleware/CreatedTeam.php(2886)",id:"apphttpmiddlewarecreatedteamphp2886",level:5},{value:"2. M\xe3 l\u1ec7nh SQL l\u1eb7p",id:"2-m\xe3-l\u1ec7nh-sql-l\u1eb7p",level:3}];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",h5:"h5",h6:"h6",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components},{Details:l}=n;return l||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"team-overview-api",children:"Team Overview API"}),"\n",(0,s.jsxs)(l,{open:!0,children:[(0,s.jsxs)("summary",{children:[(0,s.jsx)("code",{children:"GET"}),(0,s.jsx)("code",{children:(0,s.jsx)("b",{children:"/widgets/team-overview"})}),(0,s.jsx)(n.h6,{id:"t\xe0i-kho\u1ea3n-tsvhartberg",children:"T\xe0i kho\u1ea3n: TSVHartberg"}),(0,s.jsx)(n.h6,{id:"t\u1ed5ng-s\u1ed1-truy-v\u1ea5n-t\u1ea1m-t\xednh-703",children:"T\u1ed5ng s\u1ed1 truy v\u1ea5n t\u1ea1m t\xednh: 703"})]}),(0,s.jsx)("code",{children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"V\u1ea5n \u0111\u1ec1 x\u1ea3y ra: L\u1ed7i loop truy v\u1ea5n SQL g\xe2y ch\u1eadm"}),"\n",(0,s.jsx)(n.li,{children:"\u0110\xe1nh gi\xe1: T\u1ed1c \u0111\u1ed9 truy v\u1ea5n m\u1ed7i truy v\u1ea5n ri\xeang l\u1ebb kh\xe1 nhanh, api ch\u1eadm do c\xf3 s\u1ed1 l\u01b0\u1ee3ng l\u1edbn truy v\u1ea5n sql g\u1ecdi tr\u1ef1c ti\u1ebfp \u0111\u1ebfn DB d\xe2y ng\u1eadp l\u1ee5t (sql flood) d\u1eabn \u0111\u1ebfn truy v\u1ea5n ch\u1eadm"}),"\n"]})}),(0,s.jsxs)("code",{children:[(0,s.jsx)(n.p,{children:"Gi\u1ea3i ph\xe1p s\u01a1 b\u1ed9:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"thay \u0111\u1ed5i logic code, s\u1eed d\u1ee5ng design singleton \u0111\u1ec3 l\u01b0u tr\u1eef Player/User tr\xe1nh truy v\u1ea5n nhi\u1ec1u l\u1ea7n"}),"\n",(0,s.jsx)(n.li,{children:"s\u1eed d\u1ee5ng where in \u0111\u1ec3 l\u1ea5y c\xe1c tham s\u1ed1 trong m\u1ea3ng tr\xe1nh vi\u1ec7c foreach c\xe2u truy v\u1ea5n nhi\u1ec1u l\u1ea7n"}),"\n"]})]})]}),"\n",(0,s.jsxs)(l,{open:!0,children:[(0,s.jsx)(n.h3,{id:"1-controlleraction---model",children:"1. Controller/action - model"}),(0,s.jsx)(n.h5,{id:"widgetcontrollerphp59-calculatewellnessscoreofplayer108812-2024-01-15-116",children:"WidgetController.php(59): calculateWellnessScoreOfPlayer(108812, '2024-01-15', 116)"}),(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"helpers.php(4856): getWellnessScoreConfig(116)"}),"\n"]}),(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"helpers.php(4842): defaultWellnessScoreConfig(116)"}),"\n"]}),(0,s.jsx)(n.h5,{id:"widgetcontrollerphp57-get_presence_of_player2024-01-15-107728",children:"WidgetController.php(57): get_presence_of_player('2024-01-15', 107728)"}),(0,s.jsx)(n.h5,{id:"apphttpmiddlewarecreatedteamphp2886",children:"app/Http/Middleware/CreatedTeam.php(2886)"}),(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"app/Models/Player.php(153)"}),"\n"]})]}),"\n",(0,s.jsxs)(l,{open:!0,children:[(0,s.jsx)(n.h3,{id:"2-m\xe3-l\u1ec7nh-sql-l\u1eb7p",children:"2. M\xe3 l\u1ec7nh SQL l\u1eb7p"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["T\xecm th\u1ea5y truy v\u1ea5n \u0111\u1ebfn b\u1ea3ng ",(0,s.jsx)(n.code,{children:"questions"})," v\u1edbi c\xe1c c\u1ed9t ",(0,s.jsx)(n.code,{children:"system_type"})," kh\xe1c nhau, t\xecm \u0111\u01b0\u1ee3c 110 truy v\u1ea5n sql"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from `questions` \nwhere \n    `questions`.`user_id` = 116 and \n    `questions`.`user_id` is not null and \n    `system_type` = 'fatigue_and_recovery' limit 1\n"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["T\xecm th\u1ea5y truy v\u1ea5n \u0111\u1ebfn b\u1ea3ng ",(0,s.jsx)(n.code,{children:"users_configs"})," v\u1edbi c\xe1c c\u1ed9t ",(0,s.jsx)(n.code,{children:"key"})," kh\xe1c nhau, t\xecm \u0111\u01b0\u1ee3c 25 truy v\u1ea5n sql"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select `value` from `users_configs` \nwhere \n    `users_configs`.`user_id` = 116 and \n    `users_configs`.`user_id` is not null and \n    `key` = 'wellness_score_config' limit 1\n"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["T\xecm th\u1ea5y truy v\u1ea5n \u0111\u1ebfn b\u1ea3ng ",(0,s.jsx)(n.code,{children:"positions"})," v\u1edbi c\xe1c c\u1ed9t ",(0,s.jsx)(n.code,{children:"positions"}),".",(0,s.jsx)(n.code,{children:"id"})," kh\xe1c nhau, t\xecm \u0111\u01b0\u1ee3c 34 truy v\u1ea5n sql"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from `positions` \nwhere \n    `positions`.`id` = 3317 and `positions`.`id` is not null \nlimit 1\n"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["T\xecm th\u1ea5y truy v\u1ea5n \u0111\u1ebfn b\u1ea3ng ",(0,s.jsx)(n.code,{children:"files"})," v\u1edbi c\xe1c c\u1ed9t ",(0,s.jsx)(n.code,{children:"files"}),".",(0,s.jsx)(n.code,{children:"id"})," kh\xe1c nhau, t\xecm \u0111\u01b0\u1ee3c 109 truy v\u1ea5n sql"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from `files` \nwhere \n    `files`.`id` = 181441 and \n    `files`.`id` is not null \nlimit 1\n"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["T\xecm th\u1ea5y truy v\u1ea5n \u0111\u1ebfn b\u1ea3ng ",(0,s.jsx)(n.code,{children:"users"})," v\u1edbi c\xe1c c\u1ed9t ",(0,s.jsx)(n.code,{children:"users"}),".",(0,s.jsx)(n.code,{children:"id"})," kh\xe1c nhau, t\xecm \u0111\u01b0\u1ee3c 118 truy v\u1ea5n sql"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from `users` \nwhere \n    `users`.`id` = 116 and \n    `users`.`deleted_at` is null \nlimit 1\n"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["T\xecm th\u1ea5y truy v\u1ea5n \u0111\u1ebfn b\u1ea3ng ",(0,s.jsx)(n.code,{children:"players"})," v\u1edbi c\xe1c c\u1ed9t ",(0,s.jsx)(n.code,{children:"players"}),".",(0,s.jsx)(n.code,{children:"id"}),", ",(0,s.jsx)(n.code,{children:"last_name"})," kh\xe1c nhau, t\xecm \u0111\u01b0\u1ee3c 34 truy v\u1ea5n sql"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select count(*) as aggregate from `players` \nwhere \n    `players`.`user_id` = 116 and \n    `players`.`user_id` is not null and \n    `id` != 17005 and \n    `last_name` = 'Rotter' and \n    `deactivated_at` is null and \n    `first_name` LIKE 'T%'\n"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["T\xecm th\u1ea5y truy v\u1ea5n \u0111\u1ebfn b\u1ea3ng ",(0,s.jsx)(n.code,{children:"players"})," v\u1edbi c\xe1c c\u1ed9t ",(0,s.jsx)(n.code,{children:"players"}),".",(0,s.jsx)(n.code,{children:"id"})," kh\xe1c nhau, t\xecm \u0111\u01b0\u1ee3c 55 truy v\u1ea5n sql"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from `players` \nwhere `players`.`id` = 151461 limit 1\n"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["T\xecm th\u1ea5y truy v\u1ea5n \u0111\u1ebfn b\u1ea3ng ",(0,s.jsx)(n.code,{children:"presence_lists"})," v\u1edbi c\xe1c c\u1ed9t ",(0,s.jsx)(n.code,{children:"player_id"})," kh\xe1c nhau, t\xecm \u0111\u01b0\u1ee3c 34 truy v\u1ea5n sql"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select `presence_option_id`, `note`, `date` from `presence_lists` \nwhere \n    `player_id` = 108812 \norder by `date` desc\n"})})]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1151:(e,n,l)=>{l.d(n,{Z:()=>c,a:()=>i});var s=l(7294);const r={},t=s.createContext(r);function i(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);